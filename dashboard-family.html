<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>CareFlow - Family View</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/feather-icons"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script src="script.js"></script>
</head>

<body class="bg-blue-50 dark:bg-slate-900 text-slate-900 dark:text-white pb-24">

    <div class="app-content max-w-md mx-auto relative min-h-screen">

        <!-- Header -->
        <header
            class="p-6 pt-10 sticky top-0 bg-blue-50/95 dark:bg-slate-900/95 backdrop-blur z-20 flex justify-between items-center shadow-sm">
            <div>
                <h1 class="text-2xl font-bold">Family Dashboard</h1>
                <p class="text-xs font-bold text-blue-600 dark:text-blue-400 uppercase tracking-wider">Dad is Safe â€¢ 2
                    Caregivers</p>
            </div>
            <div onclick="window.location.href='profiles-select.html'"
                class="w-10 h-10 rounded-full border border-blue-200 bg-white flex items-center justify-center cursor-pointer hover:bg-blue-50 transition shadow-sm">
                <i data-feather="repeat" class="w-5 h-5 text-blue-600"></i>
            </div>
        </header>

        <main class="px-6 space-y-6 mt-2">

            <!-- Main Status Card -->
            <section
                class="card p-6 bg-white dark:bg-slate-800 shadow-xl rounded-3xl border border-blue-100 dark:border-slate-700 relative overflow-hidden">
                <div
                    class="absolute -top-4 -right-4 w-24 h-24 bg-blue-100 dark:bg-blue-900/30 rounded-full opacity-50 blur-2xl">
                </div>

                <div class="flex flex-col items-center text-center space-y-4">
                    <div class="relative">
                        <div class="w-24 h-24 rounded-full overflow-hidden border-4 border-green-500 shadow-lg">
                            <img src="assets/profiles/dad.png" alt="Dad">
                        </div>
                        <div
                            class="absolute bottom-1 right-1 bg-green-500 text-white rounded-full p-1.5 border-4 border-white dark:border-slate-800">
                            <i data-feather="check" class="w-4 h-4"></i>
                        </div>
                    </div>

                    <div>
                        <h2 class="text-2xl font-black tracking-tight">Dad is doing great!</h2>
                        <p class="text-slate-500 dark:text-slate-400 font-medium">Last med taken: 9:00 AM (Morning
                            Routine)</p>
                    </div>

                    <div class="grid grid-cols-2 gap-4 w-full pt-6 border-t border-slate-100 dark:border-slate-700">
                        <div class="text-center">
                            <p class="text-3xl font-black text-blue-600">98%</p>
                            <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">Adherence</p>
                        </div>
                        <div class="text-center">
                            <p class="text-3xl font-black text-green-500">Normal</p>
                            <p class="text-[10px] text-slate-400 font-bold uppercase tracking-widest">Vitals Status</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Vitals Summary -->
            <section class="space-y-3">
                <h2 class="text-sm font-bold text-slate-400 uppercase tracking-wider px-1">Latest Vitals</h2>
                <div class="grid grid-cols-2 gap-3">
                    <div
                        class="card p-4 bg-white dark:bg-slate-800 shadow-sm rounded-2xl border border-slate-100 dark:border-slate-700 flex items-center space-x-3">
                        <div class="bg-red-100 dark:bg-red-900/30 p-2 rounded-lg text-red-500">
                            <i data-feather="heart" class="w-5 h-5"></i>
                        </div>
                        <div>
                            <p class="text-[10px] text-slate-400 font-bold uppercase">BP</p>
                            <p class="font-bold">120/80</p>
                        </div>
                    </div>
                    <div
                        class="card p-4 bg-white dark:bg-slate-800 shadow-sm rounded-2xl border border-slate-100 dark:border-slate-700 flex items-center space-x-3">
                        <div class="bg-blue-100 dark:bg-blue-900/30 p-2 rounded-lg text-blue-500">
                            <i data-feather="droplet" class="w-5 h-5"></i>
                        </div>
                        <div>
                            <p class="text-[10px] text-slate-400 font-bold uppercase">Sugar</p>
                            <p class="font-bold">110 mg/dL</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Recent Activity Timeline -->
            <section class="space-y-4">
                <h2 class="text-sm font-bold text-slate-400 uppercase tracking-wider px-1">Care Timeline</h2>
                <div
                    class="space-y-4 relative before:content-[''] before:absolute before:left-5 before:top-2 before:bottom-2 before:w-0.5 before:bg-slate-200 dark:before:bg-slate-700">

                    <!-- Activity Item -->
                    <div class="relative pl-12">
                        <div
                            class="absolute left-3 top-1 w-4 h-4 bg-green-500 rounded-full border-4 border-white dark:border-slate-900 z-10">
                        </div>
                        <div class="card p-3 bg-white dark:bg-slate-800 shadow-sm rounded-xl">
                            <p class="text-sm font-bold">Dad marked Morning Meds as Taken</p>
                            <p class="text-[10px] text-slate-400 flex items-center mt-1">
                                <i data-feather="clock" class="w-3 h-3 mr-1"></i> 9:15 AM
                            </p>
                        </div>
                    </div>

                    <!-- Activity Item -->
                    <div class="relative pl-12">
                        <div
                            class="absolute left-3 top-1 w-4 h-4 bg-blue-500 rounded-full border-4 border-white dark:border-slate-900 z-10">
                        </div>
                        <div class="card p-3 bg-white dark:bg-slate-800 shadow-sm rounded-xl">
                            <p class="text-sm font-bold">Asha Logged BP: 120/80</p>
                            <p class="text-[10px] text-slate-400 flex items-center mt-1">
                                <i data-feather="clock" class="w-3 h-3 mr-1"></i> Yesterday, 6:30 PM
                            </p>
                        </div>
                    </div>

                    <!-- Activity Item -->
                    <div class="relative pl-12 opacity-60">
                        <div
                            class="absolute left-3 top-1 w-4 h-4 bg-slate-300 rounded-full border-4 border-white dark:border-slate-900 z-10">
                        </div>
                        <div class="card p-3 bg-white dark:bg-slate-800 shadow-sm rounded-xl">
                            <p class="text-sm font-bold">Dr. Sharma scheduled Checkup</p>
                            <p class="text-[10px] text-slate-400 flex items-center mt-1">
                                <i data-feather="clock" class="w-3 h-3 mr-1"></i> 24 Oct, 10:00 AM
                            </p>
                        </div>
                    </div>

                </div>
            </section>

            <!-- Quick Connect Buttons -->
            <section class="grid grid-cols-3 gap-3">
                <a href="tel:+919876543210"
                    class="card p-4 flex flex-col items-center justify-center space-y-2 hover:bg-green-50 dark:hover:bg-slate-800 bg-white dark:bg-slate-800 transition active:scale-95 shadow-sm rounded-2xl border border-slate-100 dark:border-slate-700">
                    <div class="bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 p-3 rounded-full">
                        <i data-feather="phone" class="w-5 h-5"></i>
                    </div>
                    <span class="text-[10px] font-bold uppercase">Call Dad</span>
                </a>
                <a href="tel:+919876543211"
                    class="card p-4 flex flex-col items-center justify-center space-y-2 hover:bg-blue-50 dark:hover:bg-slate-800 bg-white dark:bg-slate-800 transition active:scale-95 shadow-sm rounded-2xl border border-slate-100 dark:border-slate-700">
                    <div class="bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 p-3 rounded-full">
                        <i data-feather="phone-call" class="w-5 h-5"></i>
                    </div>
                    <span class="text-[10px] font-bold uppercase">Call Asha</span>
                </a>
                <button onclick="showToast('Starting Video Chat...')"
                    class="card p-4 flex flex-col items-center justify-center space-y-2 hover:bg-indigo-50 dark:hover:bg-slate-800 bg-white dark:bg-slate-800 transition active:scale-95 shadow-sm rounded-2xl border border-slate-100 dark:border-slate-700">
                    <div
                        class="bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 p-3 rounded-full">
                        <i data-feather="video" class="w-5 h-5"></i>
                    </div>
                    <span class="text-[10px] font-bold uppercase">Video</span>
                </button>
            </section>

            <div class="h-10"></div>
        </main>

        <!-- Nav -->
        <nav
            class="fixed bottom-0 left-0 right-0 bg-white dark:bg-slate-800 border-t border-slate-200 dark:border-slate-700 pb-[env(safe-area-inset-bottom)] z-50 max-w-md mx-auto shadow-[0_-5px_10px_rgba(0,0,0,0.05)]">
            <div class="h-16 flex justify-around items-center px-4">
                <a href="#"
                    class="nav-btn flex flex-col items-center text-blue-600 transition-transform active:scale-90">
                    <i data-feather="home" class="w-6 h-6 mb-1"></i>
                    <span class="text-[10px] font-bold">Home</span>
                </a>
                <a href="chat.html"
                    class="nav-btn flex flex-col items-center text-slate-400 hover:text-blue-500 transition-colors active:scale-90">
                    <i data-feather="message-circle" class="w-6 h-6 mb-1"></i>
                    <span class="text-[10px] font-bold">Chat</span>
                </a>
                <a href="settings.html"
                    class="nav-btn flex flex-col items-center text-slate-400 hover:text-blue-500 transition-colors active:scale-90">
                    <i data-feather="settings" class="w-6 h-6 mb-1"></i>
                    <span class="text-[10px] font-bold">Settings</span>
                </a>
            </div>
        </nav>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const user = AppState.currentUser;
            if (user) {
                // Update Greeting
                const greeting = document.querySelector('header h1');
                if (greeting) greeting.textContent = `${user.name}'s Dashboard`;

                // Update Header Avatar - replace repeat icon with profile image
                const headerAvatarContainer = document.querySelector('header div[onclick]');
                if (headerAvatarContainer && user.avatar) {
                    headerAvatarContainer.innerHTML = `<img src="${user.avatar}" class="w-full h-full object-cover rounded-full" alt="${user.name}">`;
                    headerAvatarContainer.classList.remove('bg-white');
                    headerAvatarContainer.classList.add('overflow-hidden', 'border-2', 'border-blue-100');
                }

                // Smart Contacts
                if (user.name === 'Asha') {
                    // Asha is looking at her dashboard, "Call Asha" button should be "Call Nurse Maya"
                    const ashaBtn = document.querySelector('a[href="tel:+919876543211"]');
                    if (ashaBtn) {
                        ashaBtn.href = "tel:+919876543213";
                        ashaBtn.querySelector('span').textContent = "Call Maya";
                    }
                }
            }
            feather.replace();
        });
    </script>
</body>

</html>